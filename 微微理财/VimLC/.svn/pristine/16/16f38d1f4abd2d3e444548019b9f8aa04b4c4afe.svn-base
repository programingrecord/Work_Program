//
//  MSUCuponTableCell.m
//  VimLC
//
//  Created by 007 on 2018/3/19.
//  Copyright © 2018年 HM. All rights reserved.
//

#import "MSUCuponTableCell.h"

#import "MSUPathTools.h"

@implementation MSUCuponTableCell

- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
    if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {
        [self createContentView];
    }
    return self;
}

- (void)createContentView{
    UIView *bgView = [[UIView alloc] init];
    bgView.frame = CGRectMake(20*kDeviceHeightScale, 20, kDeviceWidth-40*kDeviceWidthScale, 93*kDeviceHeightScale);
//    bgView.backgroundColor = RGBA(235, 235, 235, 1);
//    bgView.layer.shadowColor = HEXCOLOR(0xb0b0b0).CGColor;
//    bgView.layer.shadowOpacity = 0.6;
//    bgView.layer.shadowPath = (__bridge CGPathRef _Nullable)([MSUPathTools drawShadowAroundControls:bgView shadowHeight:10]);
    [self addSubview:bgView];
    
    self.whiteView = [[UIView alloc] init];
    _whiteView.frame = CGRectMake(20*kDeviceHeightScale, 21*kDeviceHeightScale, kDeviceWidth-40*kDeviceWidthScale, 93*kDeviceHeightScale);
    _whiteView.backgroundColor = HEXCOLOR(0xffffff);
    _whiteView.alpha = 0.5;
    [self addSubview:_whiteView];
    _whiteView.hidden = YES;
    
    UIImageView *imaView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0 ,kDeviceWidth-40*kDeviceWidthScale, 93*kDeviceHeightScale)];
    imaView.image = [MSUPathTools showImageWithContentOfFileByName:@"msuhb_bg"];
    [bgView addSubview:imaView];
    
    self.priceLab = [[UILabel alloc] init];
    _priceLab.frame = CGRectMake(0, 15*kDeviceHeightScale, 110*kDeviceWidthScale, 37*kDeviceHeightScale);
    _priceLab.font = TEXTFONT(32);
    _priceLab.textColor = WhiteColor;
    _priceLab.textAlignment = NSTextAlignmentCenter;
    [bgView addSubview:_priceLab];
    
    self.introLab = [[UILabel alloc] init];
    _introLab.frame = CGRectMake(15, _priceLab.bottom + 3.5*kDeviceHeightScale, 80*kDeviceWidthScale, 22.5*kDeviceHeightScale);
    _introLab.font = TEXTFONT(13);
    _introLab.backgroundColor = WhiteColor;
    _introLab.textColor = HEXCOLOR(0xff6339);
    _introLab.textAlignment = NSTextAlignmentCenter;
    [bgView addSubview:_introLab];
    
    //满多少可用
    self.priLimitLab = [[UILabel alloc] init];
    _priLimitLab.frame = CGRectMake(130, 12*kDeviceHeightScale, kDeviceWidth*0.5, 22.5*kDeviceHeightScale);
//    _priLimitLab.textAlignment = NSTextAlignmentRight;
    _priLimitLab.font = TEXTFONT(16);
    _priLimitLab.textColor = HEXCOLOR(0x454545);
    [bgView addSubview:_priLimitLab];
    
    //几月标
    self.infoLab = [[UILabel alloc] init];
    _infoLab.frame = CGRectMake(_priLimitLab.left, _priLimitLab.bottom + 9.5*kDeviceHeightScale, kDeviceWidth*0.5-30, 13*kDeviceHeightScale);
//    _infoLab.textAlignment = NSTextAlignmentRight;
    _infoLab.font = TEXTFONT(13);
    _infoLab.textColor = HEXCOLOR(0xb0b0b0);
    [bgView addSubview:_infoLab];
    
    //时间
    self.timeLab = [[UILabel alloc] init];
    _timeLab.frame = CGRectMake(_priLimitLab.left, _infoLab.bottom + 8*kDeviceHeightScale, kDeviceWidth*0.5-30, 13*kDeviceHeightScale);
//    _timeLab.textAlignment = NSTextAlignmentRight;
    _timeLab.font = TEXTFONT(13);
    _timeLab.textColor = HEXCOLOR(0xb0b0b0);
    [bgView addSubview:_timeLab];
    
    //立即使用
    UILabel *useLab = [[UILabel alloc] init];
    useLab.frame = CGRectMake(kDeviceWidth-40-50, 0, 50, 93*kDeviceHeightScale);
//    useLab.backgroundColor = [UIColor redColor];
    useLab.text = @"立\n即\n使\n用";
    useLab.numberOfLines = [useLab.text length];
    useLab.textAlignment = NSTextAlignmentCenter;
    useLab.font = TEXTFONT(14);
    useLab.textColor = HEXCOLOR(0xff6339);
    [bgView addSubview:useLab];
    
}


- (void)setModel:(CouponModel *)model{
    if (_model!= model) {
        _model = model;
    }
    self.priceLab.text = [NSString stringWithFormat:@"%@",_model.amount];
    self.introLab.text = [NSString stringWithFormat:@"%@",_model.tip];
    self.priLimitLab.text = [NSString stringWithFormat:@"%@",_model.bidAmount];
    self.infoLab.text = [NSString stringWithFormat:@"%@",_model.timeCount];
    self.timeLab.text = [NSString stringWithFormat:@"%@",_model.endDate];
    NSString *bagState= [NSString stringWithFormat:@"%@",_model.bagState];
    
    if ([bagState isEqualToString:@"0"]) {
        self.whiteView.hidden = YES;
    } else{
        self.whiteView.hidden = NO;
        self.whiteView.alpha = 0.5;
    }
    
//    if ([bagState isEqualToString:@"0"]) {
//        self.StateLabel.text = @"立即使用";
//        self.priLimitLab.textColor = [UIColor colorWithHex:0x666666];
//        self.introLab.textColor = [UIColor colorWithHex:0xB0B0B0];
//        self.timeLab.textColor = [UIColor colorWithHex:0xB0B0B0];
//        self.ColorView.backgroundColor = [UIColor colorWithHex:0xF26059];
//        self.StateLabel.textColor = [UIColor colorWithHex:0xF26059];
//    }else if([bagState isEqualToString:@"1"]){
//        self.StateLabel.text = @"已使用";
//        self.priLimitLab.textColor = [UIColor colorWithHex:0xD1D1D1];
//        self.introLab.textColor = [UIColor colorWithHex:0xD1D1D1];
//        self.timeLab.textColor = [UIColor colorWithHex:0xD1D1D1];
//        self.ColorView.backgroundColor = [UIColor colorWithHex:0xD1D1D1];
//        self.StateLabel.textColor = [UIColor colorWithHex:0xD1D1D1];
//    }else{
//        self.StateLabel.text = @"已过期";
//        self.priLimitLab.textColor = [UIColor colorWithHex:0xD1D1D1];
//        self.introLab.textColor = [UIColor colorWithHex:0xD1D1D1];
//        self.timeLab.textColor = [UIColor colorWithHex:0xD1D1D1];
//        self.ColorView.backgroundColor = [UIColor colorWithHex:0xD1D1D1];
//        self.StateLabel.textColor = [UIColor colorWithHex:0xD1D1D1];
//    }
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end
